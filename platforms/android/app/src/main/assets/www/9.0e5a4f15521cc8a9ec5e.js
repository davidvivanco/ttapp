(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{hx61:function(e,t,n){"use strict";n.r(t);var r=n("CcnG"),i=function(){return function(){sessionStorage.setItem("SameSite","lax")}}(),s=n("pMnS"),l=n("fIf1"),a=n("hDo6"),o=n("A7o+"),u=n("Ip0R"),c=n("AytR"),p=n("DSfs"),h=function(){function e(e,t,n){this.http=e,this.router=t,this.errorsService=n,this.endpoint=c.a.apiUrl+"api"}return e.prototype.loginBlog=function(e,t){return this.http.post("https://blog.kolete.es/api/v1/login",{email:e,password:t}).pipe()},e.prototype.registerBlog=function(e,t){return this.http.post("https://blog.kolete.es/api/v1/register",{email:e,password:t,company:"TalentTools",rol:"registro"}).pipe()},e.prototype.login=function(e,t){return this.http.post("https://app-kolete.appspot.com/api/user/login",{email:e,password:t}).pipe()},e.prototype.register=function(e,t){return this.http.post("https://app-kolete.appspot.com/api/user/auto-register-user",{email:e,password:t}).pipe()},e}(),f=n("kmKP"),m=n("7AsU"),g=function(){function e(e,t,n,r,i,s){var l=this;this.apiService=e,this.sanitizer=t,this.userService=n,this.configurationService=r,this.router=i,this.route=s,this.urlIframe=!1,this.user=this.userService.getUser();var a=this.user.personalData.email.personal[0]||this.user.personalData.email.professional[0];c.a.production||(a="talentoo-desarrollo-pruebas@talenttools.es");var o=this.generatePassword(a);this.checkParams=this.route.snapshot.queryParams,this.urlAcademy||(this.urlAcademy=""),this.urlAcademy="https://app.kolete.es/login-custom?tokenTT=",this.config=this.configurationService.getConfiguration(),this.apiService.loginBlog(a,o).subscribe(function(e){e&&e.results&&e.results.status||(l.apiService.registerBlog(a,o).subscribe(function(e){}),l.finishLoading=!0)}),this.apiService.login(a,o).subscribe(function(e){l.navigateFlagHelper(e)},function(e){l.apiService.register(a,o).subscribe(function(e){l.navigateFlagHelper(e)},function(e){})})}return e.prototype.onMessage=function(e){this.receiveMessage(e),e.data.logged&&this.checkParams.urlIframe&&this.redirectIframe()},e.prototype.ngOnInit=function(){},e.prototype.navigateFlagHelper=function(e){this.urlAcademy+=e.user.tokenTT+"&embed=true&lang="+window.sessionStorage.getItem("lang")+"&primaryColor="+this.config.company.primaryColor.substr(1)+"&secondaryColor="+this.config.company.secondaryColor.substr(1),this.urlAcademySafe=this.sanitizer.bypassSecurityTrustResourceUrl(this.urlAcademy),this.finishLoading=!0},e.prototype.redirectIframe=function(){this.finishLoading=!1,this.router.navigate([],{relativeTo:this.route,queryParams:{urlIframe:this.checkParams.urlIframe},queryParamsHandling:"merge"}),this.urlAcademy="https://app.kolete.es/"+this.checkParams.urlIframe+"?embed=true&url="+this.checkParams.urlIframe,this.urlAcademySafe=this.sanitizer.bypassSecurityTrustResourceUrl(this.urlAcademy),this.finishLoading=!0},e.prototype.generatePassword=function(e){var t=e.length;return(t+=15e5*t).toString()},e.prototype.receiveMessage=function(e){this.urlEvent=e.data.urlIframe,this.router.navigate([],{relativeTo:this.route,queryParams:{urlIframe:e.data.url},queryParamsHandling:"merge"})},e}(),b=n("ZYjt"),d=n("ZYCi"),y=r.rb({encapsulation:2,styles:[],data:{}});function v(e){return r.Nb(0,[(e()(),r.tb(0,0,null,null,0,"iframe",[["height","100%"],["style","overflow:hidden;"],["title","academy"],["width","100%"]],[[1,"src",5]],null,null,null,null))],null,function(e,t){e(t,0,0,t.component.urlAcademySafe)})}function w(e){return r.Nb(0,[(e()(),r.tb(0,0,null,null,7,"div",[["class","iframe-container"]],null,null,null,null,null)),(e()(),r.tb(1,0,null,null,2,"app-breadcrumb",[],null,null,null,l.b,l.a)),r.sb(2,49152,null,0,a.a,[],{breadcrumbs:[0,"breadcrumbs"]},null),r.Fb(131072,o.k,[o.l,r.h]),(e()(),r.tb(4,0,null,null,3,"div",[["class","row iframe-wrapper"]],null,null,null,null,null)),(e()(),r.tb(5,0,null,null,2,"div",[["class","col-12"]],null,null,null,null,null)),(e()(),r.kb(16777216,null,null,1,null,v)),r.sb(7,16384,null,0,u.n,[r.R,r.O],{ngIf:[0,"ngIf"]},null),(e()(),r.tb(8,0,null,null,0,"div",[["class","clearfix"]],null,null,null,null,null))],function(e,t){var n=t.component;e(t,2,0,r.vb(1,"Talentoo,",r.Mb(t,2,0,r.Db(t,3).transform("mainPage.matTooltip.academy")),"")),e(t,7,0,n.finishLoading)},null)}function S(e){return r.Nb(0,[(e()(),r.tb(0,0,null,null,1,"app-access",[],null,[["window","message"]],function(e,t,n){var i=!0;return"window:message"===t&&(i=!1!==r.Db(e,1).onMessage(n)&&i),i},w,y)),r.sb(1,114688,null,0,g,[h,b.c,f.a,m.a,d.m,d.a],null,null)],function(e,t){e(t,1,0)},null)}var k=r.pb("app-access",g,S,{},{},[]),B=n("t/Na"),I=function(){return function(){}}(),A=n("Fzqc"),P=n("Wf4p"),T=n("SMsm"),q=n("f1yo"),C=n("VcAE");n.d(t,"AcademyModuleNgFactory",function(){return M});var M=r.qb(i,[],function(e){return r.Ab([r.Bb(512,r.j,r.eb,[[8,[s.a,k]],[3,r.j],r.z]),r.Bb(4608,u.p,u.o,[r.w,[2,u.C]]),r.Bb(4608,h,h,[B.c,d.m,p.a]),r.Bb(1073742336,u.c,u.c,[]),r.Bb(1073742336,d.q,d.q,[[2,d.w],[2,d.m]]),r.Bb(1073742336,I,I,[]),r.Bb(1073742336,A.a,A.a,[]),r.Bb(1073742336,P.n,P.n,[[2,P.f],[2,b.g]]),r.Bb(1073742336,T.c,T.c,[]),r.Bb(1073742336,q.a,q.a,[]),r.Bb(1073742336,o.i,o.i,[]),r.Bb(1073742336,C.a,C.a,[]),r.Bb(1073742336,i,i,[]),r.Bb(1024,d.k,function(){return[[{path:"",component:g}],[]]},[])])})}}]);