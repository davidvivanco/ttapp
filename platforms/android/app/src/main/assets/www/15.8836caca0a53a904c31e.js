(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"Kfj/":function(t,e,r){"use strict";r.r(e);var n=r("CcnG"),s=function(){return function(){sessionStorage.setItem("SameSite","lax")}}(),i=r("pMnS"),l=r("fIf1"),o=r("hDo6"),a=r("A7o+"),u=r("Ip0R"),c=r("AytR"),p=r("DSfs"),h=function(){function t(t,e,r){this.http=t,this.router=e,this.errorsService=r,this.endpoint=c.a.apiUrl+"api"}return t.prototype.loginBlog=function(t,e){return this.http.post("https://blog.kolete.es/api/v1/login",{email:t,password:e}).pipe()},t.prototype.registerBlog=function(t,e){return this.http.post("https://blog.kolete.es/api/v1/register",{email:t,password:e,company:"TalentTools",rol:"registro"}).pipe()},t.prototype.login=function(t,e){return this.http.post("https://app-kolete.appspot.com/api/user/login",{email:t,password:e}).pipe()},t.prototype.register=function(t,e){return this.http.post("https://app-kolete.appspot.com/api/user/auto-register-user",{email:t,password:e}).pipe()},t}(),b=r("kmKP"),f=r("7AsU"),g=function(){function t(t,e,r,n,s,i){var l=this;this.apiService=t,this.sanitizer=e,this.userService=r,this.configurationService=n,this.router=s,this.route=i,this.urlIframe=!1,this.user=this.userService.getUser();var o=this.user.personalData.email.personal[0]||this.user.personalData.email.professional[0];c.a.production||(o="talentoo-desarrollo@talenttools.es");var a=this.generatePassword(o);this.checkParams=this.route.snapshot.queryParams,this.urlObservatory="https://blog.kolete.es/blog?tokenTT=",this.config=this.configurationService.getConfiguration(),this.apiService.loginBlog(o,a).subscribe(function(t){t&&t.results&&t.results.status||(l.apiService.registerBlog(o,a).subscribe(function(t){}),l.finishLoading=!0)}),this.apiService.login(o,a).subscribe(function(t){l.navigateFlagHelper(t)},function(t){l.apiService.register(o,a).subscribe(function(t){l.navigateFlagHelper(t)},function(t){})})}return t.prototype.onMessage=function(t){this.receiveMessage(t),t.data.logged&&this.checkParams.urlIframe&&this.redirectIframe()},t.prototype.ngOnInit=function(){},t.prototype.navigateFlagHelper=function(t){this.urlObservatory+=t.user.tokenTT+"&embed=true&menu=true&lang="+window.sessionStorage.getItem("lang")+"&primaryColor="+this.config.company.primaryColor.substr(1)+"&secondaryColor="+this.config.company.secondaryColor.substr(1),this.urlObservatorySafe=this.sanitizer.bypassSecurityTrustResourceUrl(this.urlObservatory),this.finishLoading=!0},t.prototype.redirectIframe=function(){this.finishLoading=!1,this.router.navigate([],{relativeTo:this.route,queryParams:{urlIframe:this.checkParams.urlIframe},queryParamsHandling:"merge"}),this.urlObservatory="https://app.kolete.es/"+this.checkParams.urlIframe+"?embed=true&url="+this.checkParams.urlIframe,this.urlObservatorySafe=this.sanitizer.bypassSecurityTrustResourceUrl(this.urlObservatory),this.finishLoading=!0},t.prototype.generatePassword=function(t){var e=t.length;return(e+=15e5*e).toString()},t.prototype.receiveMessage=function(t){this.urlEvent=t.data.urlIframe,this.router.navigate([],{relativeTo:this.route,queryParams:{urlIframe:t.data.url},queryParamsHandling:"merge"})},t}(),m=r("ZYjt"),v=r("ZYCi"),d=n.rb({encapsulation:2,styles:[],data:{}});function y(t){return n.Nb(0,[(t()(),n.tb(0,0,null,null,0,"iframe",[["height","100%"],["style","overflow:hidden;"],["title","observatory"],["width","100%"]],[[8,"src",5]],null,null,null,null))],null,function(t,e){t(e,0,0,e.component.urlObservatorySafe)})}function w(t){return n.Nb(0,[(t()(),n.tb(0,0,null,null,7,"div",[["class","iframe-container"]],null,null,null,null,null)),(t()(),n.tb(1,0,null,null,2,"app-breadcrumb",[],null,null,null,l.b,l.a)),n.sb(2,49152,null,0,o.a,[],{breadcrumbs:[0,"breadcrumbs"]},null),n.Fb(131072,a.k,[a.l,n.h]),(t()(),n.tb(4,0,null,null,3,"div",[["class","row iframe-wrapper"]],null,null,null,null,null)),(t()(),n.tb(5,0,null,null,2,"div",[["class","col-12"]],null,null,null,null,null)),(t()(),n.kb(16777216,null,null,1,null,y)),n.sb(7,16384,null,0,u.n,[n.R,n.O],{ngIf:[0,"ngIf"]},null),(t()(),n.tb(8,0,null,null,0,"div",[["class","clearfix"]],null,null,null,null,null))],function(t,e){var r=e.component;t(e,2,0,n.vb(1,"Talentoo,",n.Mb(e,2,0,n.Db(e,3).transform("mainPage.matTooltip.observatory")),"")),t(e,7,0,r.finishLoading)},null)}function S(t){return n.Nb(0,[(t()(),n.tb(0,0,null,null,1,"app-access",[],null,[["window","message"]],function(t,e,r){var s=!0;return"window:message"===e&&(s=!1!==n.Db(t,1).onMessage(r)&&s),s},w,d)),n.sb(1,114688,null,0,g,[h,m.c,b.a,f.a,v.m,v.a],null,null)],function(t,e){t(e,1,0)},null)}var k=n.pb("app-access",g,S,{},{},[]),B=r("t/Na"),I=function(){return function(){}}(),P=r("Fzqc"),T=r("Wf4p"),O=r("SMsm"),q=r("f1yo"),C=r("VcAE");r.d(e,"ObservatoryModuleNgFactory",function(){return M});var M=n.qb(s,[],function(t){return n.Ab([n.Bb(512,n.j,n.eb,[[8,[i.a,k]],[3,n.j],n.z]),n.Bb(4608,u.p,u.o,[n.w,[2,u.C]]),n.Bb(4608,h,h,[B.c,v.m,p.a]),n.Bb(1073742336,u.c,u.c,[]),n.Bb(1073742336,v.q,v.q,[[2,v.w],[2,v.m]]),n.Bb(1073742336,I,I,[]),n.Bb(1073742336,P.a,P.a,[]),n.Bb(1073742336,T.n,T.n,[[2,T.f],[2,m.g]]),n.Bb(1073742336,O.c,O.c,[]),n.Bb(1073742336,q.a,q.a,[]),n.Bb(1073742336,a.i,a.i,[]),n.Bb(1073742336,C.a,C.a,[]),n.Bb(1073742336,s,s,[]),n.Bb(1024,v.k,function(){return[[{path:"",component:g}],[]]},[])])})}}]);