<div class="close-dialog">
  <button mat-button (click)="close()"><em class="material-icons">close</em></button>
</div>
<form *ngIf="formGroupMenu && (fromCreateMenu || fromEditMenu)" [formGroup]="formGroupMenu">
  <h1 *ngIf="fromCreateMenu" class="mat-dialog-title primary-color">
    {{'menu.addMenu' | translate}}
  </h1>
  <h1 *ngIf="fromEditMenu" class="mat-dialog-title primary-color">
    {{'menu.editMenu' | translate}}
  </h1>
  <mat-dialog-content>
    <div class="row mt-l mb-m">
      <div class="col-12">
        <mat-form-field>
          <input type="text" matInput placeholder="{{'adminPersonalData.modal.writeTitle' | translate}}"
            formControlName="title" (input)="onTitleChange($event.target.value)">
          <mat-hint>{{'genericMessages.requiredField' | translate}}</mat-hint>
        </mat-form-field>
      </div>
      <div class="col-12">
        <mat-form-field>
          <mat-select formControlName="icon" (selectionChange)="onIconChange()" [(value)]="selectedIconItem"
            placeholder="{{'menu.modal.icon' | translate}}">
            <mat-select-trigger>
              <mat-icon>{{ selectedIconItem }}</mat-icon>
            </mat-select-trigger>
            <input matInput [placeholder]="'announcements.list.filterElements' | translate"
              (keyup)="onKeyIcon($event.target.value)" class="inputHeight">
            <mat-option> {{'menu.modal.icon' | translate}} </mat-option>
            <mat-option *ngFor="let icon of selectedIconList" [value]="icon.icon">
              <mat-icon>{{icon.icon}}</mat-icon><span>{{icon.name}}</span>
            </mat-option>
          </mat-select>
          <mat-hint>{{'genericMessages.requiredField' | translate}}</mat-hint>
        </mat-form-field>
      </div>
      <div class="col-12" *ngIf="!fromEditBlock && !fromCreateBlock">
        <mat-form-field>
          <mat-label>{{'menu.modal.roles' | translate}}</mat-label>
          <mat-select formControlName="rol" multiple (selectionChange)="onRolChange($event)">
            <mat-option #todos value="todosRoles">
              {{'menu.modal.selectAll' | translate}}
            </mat-option>
            <mat-option #ninguno (click)="toggleNone()">
              {{'menu.modal.selectNone' | translate}}
            </mat-option>
            <mat-option *ngFor="let rol of roles" [value]="rol" [disabled]="allRolesSelected">
              {{rol.name}}
            </mat-option>
          </mat-select>
          <mat-hint>{{'genericMessages.requiredField' | translate}}</mat-hint>
        </mat-form-field>
      </div>
      <div *ngIf="fromCreateMenu || fromEditMenu" class="col-12">
        <mat-slide-toggle (change)="manager($event)" class="ml-sm" formControlName="manager">
          {{'menu.modal.managers' | translate}}
        </mat-slide-toggle>
      </div>
    </div>
    <div class="clearfix"></div>
    <div class="clearfix mt-sm"></div>
  </mat-dialog-content>
  <mat-dialog-actions>
    <button class="btn-stroked-primary" (click)="close()"
      mat-flat-button>{{'genericMessages.cancel' | translate}}</button>
    <button *ngIf="fromCreateMenu" class="btn-primary"
      [disabled]="(formGroupMenu.invalid && formGroupMenu.touched) || !addEnabledTitle || !addEnabledType"
      (click)="addNewMenu()" mat-flat-button>{{'genericMessages.add' | translate}}</button>
    <button *ngIf="fromEditMenu" class="btn-primary" [disabled]="formGroupMenu.invalid && formGroupMenu.touched"
      (click)="editMenu()" mat-flat-button>{{'genericMessages.edit' | translate}}</button>
  </mat-dialog-actions>
</form>

<form *ngIf="formGroupBlock  && (fromCreateBlock || fromEditBlock)" [formGroup]="formGroupBlock">
  <h1 *ngIf="fromCreateBlock" class="mat-dialog-title primary-color">
    {{'menu.addBlock' | translate}}
  </h1>
  <h1 *ngIf="fromEditBlock" class="mat-dialog-title primary-color">
    {{'menu.editBlock' | translate}}
  </h1>
  <mat-dialog-content>
    <div class="row mt-l mb-m">
      <div class="col-12">
        <mat-form-field>
          <input type="text" matInput placeholder="{{'adminPersonalData.modal.writeTitle' | translate}}"
            formControlName="title" (input)="onTitleChange($event.target.value)">
          <mat-hint>{{'genericMessages.requiredField' | translate}}</mat-hint>
        </mat-form-field>
      </div>
      <div class="col-12">
        <mat-form-field>
          <mat-select formControlName="icon" (selectionChange)="onIconChange()" [(value)]="selectedIconItem"
            placeholder="{{'menu.modal.icon' | translate}}">
            <mat-select-trigger>
              <mat-icon>{{ selectedIconItem }}</mat-icon>
            </mat-select-trigger>
            <input matInput [placeholder]="'announcements.list.filterElements' | translate"
              (keyup)="onKeyIcon($event.target.value)" class="inputHeight">
            <mat-option> {{'menu.modal.icon' | translate}} </mat-option>
            <mat-option *ngFor="let icon of selectedIconList" [value]="icon.icon">
              <mat-icon>{{icon.icon}}</mat-icon><span>{{icon.name}}</span>
            </mat-option>
          </mat-select>
          <mat-hint>{{'genericMessages.requiredField' | translate}}</mat-hint>
        </mat-form-field>
      </div>
      <div class="col-12" *ngIf="fromEditBlock || fromCreateBlock">
        <mat-form-field>
          <input type="text" matInput placeholder="{{'menu.modal.writeDesc' | translate}}" formControlName="desc">
          <mat-hint>{{'menu.modal.noRequired' | translate}}</mat-hint>
        </mat-form-field>
      </div>
    </div>
    <div class="clearfix"></div>
    <div class="clearfix mt-sm"></div>
  </mat-dialog-content>
  <mat-dialog-actions>
    <button class="btn-stroked-primary" (click)="close()"
      mat-flat-button>{{'genericMessages.cancel' | translate}}</button>
    <button *ngIf="fromCreateBlock" class="btn-primary"
      [disabled]="(formGroupBlock.invalid && formGroupBlock.touched) || !addEnabledTitle || !addEnabledType"
      (click)="addNewBlock()" mat-flat-button>{{'genericMessages.add' | translate}}</button>
    <button *ngIf="fromEditBlock" class="btn-primary" [disabled]="(formGroupBlock.invalid && formGroupBlock.touched)"
      (click)="editBlock()" mat-flat-button>{{'genericMessages.edit' | translate}}</button>
  </mat-dialog-actions>
</form>